update malloc to sodium_malloc (IMPORTANT)
use constant unsigned char on input that does not change
decouple the socket library

